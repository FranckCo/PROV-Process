@prefix reclink: <http://example.org/recordlinkage/> .
@prefix prov: <http://www.w3.org/ns/prov#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix dqm: <http://purl.org/dqm-vocabulary/v1/dqm#> .

# Candidate pairs to linkage keys

# Fully defined in fragment 3, repeated here for completeness
reclink:candidatePairs a prov:Entity ;
        rdfs:label "Candidate pairs (in blocks)"@en .

reclink:comparisonOutcomes a prov:Entity ;
        rdfs:label "Comparison outcomes"@en ;
        prov:wasGeneratedBy reclink:compareRecords;
        prov:qualifiedGeneration [
             a prov:Generation ;
             prov:activity reclink:compareRecords ;
             rdfs:comment " The outcomes of the comparisons are generated by the comparison of the records."@en;
        ] .

reclink:linkageKeys a prov:Entity ;
        rdfs:label "Linkage keys"@en ;
        prov:wasDerivedFrom reclink:candidatePairs ;
        prov:qualifiedDerivation [
             a prov:Derivation ;
             prov:entity reclink:candidatePairs ;
             prov:hadActivity reclink:compareRecords ;
        ] ;
        prov:qualifiedDerivation [
             a prov:Derivation ;
             prov:entity reclink:comparisonOutcomes ;
             prov:hadActivity reclink:makeLinkageDecisionsDeterministic ;
             prov:hadActivity reclink:makeLinkageDecisionsProbalistic ;
        ] .

reclink:compareRecords a prov:Activity ;
        rdfs:label "Compare records"@en ;
        prov:used reclink:candidatePairs .

# Review naming (esp. name order)
reclink:makeLinkageDecisionsDeterministic a prov:Activity ;
        rdfs:label "Make linkage decisions deterministic"@en ;
        prov:used reclink:comparisonOutcomes , reclink:logicalConditions .

reclink:makeLinkageDecisionsProbalistic a prov:Activity ;
        rdfs:label "Make linkage decisions probabilistic"@en ;
        prov:used reclink:comparisonOutcomes , reclink:linkagePairWeights .

reclink:logicalConditions a prov:Entity , dqm:ConditionalRule ;
        prov:wasGeneratedBy reclink:compareRecords ;
        rdfs:comment "These logical conditions are developed iteratively using manual reviews on samples of pairs."@en .

reclink:linkagePairWeights a prov:Entity , dqm:DataQualityScore ;
        prov:wasGeneratedBy reclink:compareRecords ;
        rdfs:comment "The total weight is compared to two thresholds to make decisions as to whether the pair represents a match or non-match. Pairs with a weight between the two thresholds are resolved manually."@en .